{"mappings":"AAAA,MAAM,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,OAAO,AAAC;AAEpC,MAAM,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,AAAC;AAC7C,MAAM,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,AAAC;AAC1D,MAAM,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,AAAC;AACnD,MAAM,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,AAAC;AACjD,MAAM,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,AAAC;AACzD,MAAM,aAAa,GAAG,QAAQ,CAAC,cAAc,CAAC,oBAAoB,CAAC,AAAC;AAEpE,MAAM,MAAM,GAAG;IACd,gBAAgB,EAAE,SAAU,aAAa,EAAE;QAC1C,MAAM,gBAAgB,GAAG,IAAI,CAAC,KAAK,CAClC,AAAC,aAAa,CAAC,MAAM,GAAG,aAAa,CAAC,KAAK,GAAI,GAAG,CAClD,AAAC;QACF,QAAQ,CAAC,YAAY,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC;QACjD,QAAQ,CAAC,sBAAsB,CAAC,WAAW,GAAG,CAAC,EAAE,gBAAgB,CAAC,CAAC,CAAC,CAAC;KACrE;CACD,AAAC;AAEF,oCAAoC;AACpC,MAAM,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC;IAC7B,OAAO,EAAE,+BAA+B;IACxC,OAAO,EAAE;QACR,aAAa,EAAE,OAAO;KACtB;CACD,CAAC,AAAC;AAEH,eAAe,WAAW,GAAG;IAC5B,MAAM,WAAW,GAAG,IAAI,QAAQ,EAAE,AAAC;IACnC,MAAM,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,AAAC;IACnD,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,AAAC;IAChC,WAAW,CAAC,MAAM,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;IAEvC,IAAI;QACH,MAAM,QAAQ,GAAG,MAAM,QAAQ,CAAC,IAAI,CAAC,SAAS,EAAE,WAAW,EAAE,MAAM,CAAC,AAAC;QACrE,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QACtB,OAAO,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC;KAChC,CAAC,OAAO,GAAG,EAAE;QACb,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;KACnB;CACD;AAED,eAAe,mBAAmB,CAAC,SAAS,EAAE;IAC7C,IAAI;QACH,MAAM,QAAQ,GAAG,MAAM,QAAQ,CAAC,IAAI,CAAC,aAAa,EAAE;YACnD,SAAS,EAAE,SAAS;SACpB,CAAC,AAAC;QACH,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QACtB,OAAO,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC;KACxB,CAAC,OAAO,GAAG,EAAE;QACb,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;KACnB;CACD;AAED,eAAe,sBAAsB,CAAC,EAAE,EAAE;IACzC,IAAI;QACH,MAAM,QAAQ,GAAG,MAAM,QAAQ,CAAC,GAAG,CAAC,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC,CAAC,AAAC;QACzD,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QACtB,OAAO,QAAQ,CAAC;KAChB,CAAC,OAAO,GAAG,EAAE;QACb,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;KACnB;CACD;AAED,eAAe,WAAW,CAAC,CAAC,EAAE;IAC7B,CAAC,CAAC,cAAc,EAAE,CAAC;IACnB,QAAQ,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;IACjC,aAAa,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;IACtC,OAAO,CAAC,WAAW,GAAG,EAAE,CAAC;IACzB,IAAI;QACH,MAAM,SAAS,GAAG,MAAM,WAAW,EAAE,AAAC;QACtC,MAAM,gBAAgB,GAAG,MAAM,mBAAmB,CAAC,SAAS,CAAC,AAAC;QAC9D,MAAM,eAAe,GAAG,WAAW,CAAC,UAAY;YAC/C,MAAM,QAAQ,GAAG,MAAM,sBAAsB,CAAC,gBAAgB,CAAC,AAAC;YAChE,OAAQ,QAAQ,CAAC,IAAI,CAAC,MAAM;gBAC3B,KAAK,QAAQ;oBACZ,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;oBAE1C,OAAO,CAAC,WAAW,GAAG,4BAA4B,CAAC;oBAEnD,MAAM;gBACP,KAAK,YAAY;oBAChB,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;oBAE7C,OAAO,CAAC,WAAW,GAAG,+BAA+B,CAAC;oBACtD,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;oBAC/B,QAAQ,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;oBAChC,aAAa,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;oBACrC,MAAM;gBACP,KAAK,WAAW;oBACf,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;oBAEvC,OAAO,CAAC,WAAW,GAAG,yBAAyB,CAAC;oBAChD,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;oBAE9B,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACtC,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,EAC7B,aAAa,CAAC,eAAe,CAAC,CAAC;oBAEhC,MAAM;gBACP,KAAK,OAAO;oBACX,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;oBACrB,OAAO,CAAC,WAAW,GAClB,2CAA2C,CAAC;oBAC7C,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;oBAC9B,aAAa,CAAC,eAAe,CAAC,CAAC;aAChC;SACD,EAAE,IAAI,CAAC,AAAC;KACT,CAAC,OAAO,GAAG,EAAE;QACb,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;KACnB;CACD;AAED,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC,CAAC,GAAK,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC","sources":["src/app.js"],"sourcesContent":["const API_KEY = process.env.API_KEY;\r\n\r\nconst form = document.getElementById(\"form\");\r\nconst textOutput = document.getElementById(\"text-output\");\r\nconst loading = document.getElementById(\"loading\");\r\nconst loader = document.getElementById(\"loader\");\r\nconst progress = document.getElementById(\"progress-bar\");\r\nconst progressLabel = document.getElementById(\"progress-bar-label\");\r\n\r\nconst config = {\r\n\tonUploadProgress: function (progressEvent) {\r\n\t\tconst percentCompleted = Math.round(\r\n\t\t\t(progressEvent.loaded / progressEvent.total) * 100\r\n\t\t);\r\n\t\tprogress.setAttribute(\"value\", percentCompleted);\r\n\t\tprogress.previousElementSibling.textContent = `${percentCompleted}%`;\r\n\t},\r\n};\r\n\r\n// Setting up the AssemblyAI headers\r\nconst assembly = axios.create({\r\n\tbaseURL: \"https://api.assemblyai.com/v2\",\r\n\theaders: {\r\n\t\tauthorization: API_KEY,\r\n\t},\r\n});\r\n\r\nasync function uploadAudio() {\r\n\tconst formPayload = new FormData();\r\n\tconst file = document.getElementById(\"fileupload\");\r\n\tconst audioFile = file.files[0];\r\n\tformPayload.append(\"audio\", audioFile);\r\n\r\n\ttry {\r\n\t\tconst response = await assembly.post(\"/upload\", formPayload, config);\r\n\t\tconsole.log(response);\r\n\t\treturn response.data.upload_url;\r\n\t} catch (err) {\r\n\t\tconsole.error(err);\r\n\t}\r\n}\r\n\r\nasync function createTranscription(audio_URL) {\r\n\ttry {\r\n\t\tconst response = await assembly.post(\"/transcript\", {\r\n\t\t\taudio_url: audio_URL,\r\n\t\t});\r\n\t\tconsole.log(response);\r\n\t\treturn response.data.id;\r\n\t} catch (err) {\r\n\t\tconsole.error(err);\r\n\t}\r\n}\r\n\r\nasync function getTranscriptionStatus(id) {\r\n\ttry {\r\n\t\tconst response = await assembly.get(`/transcript/${id}`);\r\n\t\tconsole.log(response);\r\n\t\treturn response;\r\n\t} catch (err) {\r\n\t\tconsole.error(err);\r\n\t}\r\n}\r\n\r\nasync function handleClick(e) {\r\n\te.preventDefault();\r\n\tprogress.style.display = \"block\";\r\n\tprogressLabel.style.display = \"block\";\r\n\tloading.textContent = \"\";\r\n\ttry {\r\n\t\tconst audio_URL = await uploadAudio();\r\n\t\tconst transcription_id = await createTranscription(audio_URL);\r\n\t\tconst checkCompletion = setInterval(async () => {\r\n\t\t\tconst response = await getTranscriptionStatus(transcription_id);\r\n\t\t\tswitch (response.data.status) {\r\n\t\t\t\tcase \"queued\":\r\n\t\t\t\t\tconsole.log(\"Your audio is being queued\");\r\n\r\n\t\t\t\t\tloading.textContent = \"Your audio is being queued\";\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"processing\":\r\n\t\t\t\t\tconsole.log(\"Your audio is being processed\");\r\n\r\n\t\t\t\t\tloading.textContent = \"Your audio is being processed\";\r\n\t\t\t\t\tloader.style.display = \"block\";\r\n\t\t\t\t\tprogress.style.display = \"none\";\r\n\t\t\t\t\tprogressLabel.style.display = \"none\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"completed\":\r\n\t\t\t\t\tconsole.log(\"Transcription complete!\");\r\n\r\n\t\t\t\t\tloading.textContent = \"Transcription complete!\";\r\n\t\t\t\t\tloader.style.display = \"none\";\r\n\r\n\t\t\t\t\ttextOutput.append(response.data.text);\r\n\t\t\t\t\tif (response.data.text != null) {\r\n\t\t\t\t\t\tclearInterval(checkCompletion);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"error\":\r\n\t\t\t\t\tconsole.log(\"Error\");\r\n\t\t\t\t\tloading.textContent =\r\n\t\t\t\t\t\t\"There has been an error, please try again\";\r\n\t\t\t\t\tloader.style.display = \"none\";\r\n\t\t\t\t\tclearInterval(checkCompletion);\r\n\t\t\t}\r\n\t\t}, 1000);\r\n\t} catch (err) {\r\n\t\tconsole.error(err);\r\n\t}\r\n}\r\n\r\nform.addEventListener(\"submit\", (e) => handleClick(e));\r\n"],"names":[],"version":3,"file":"index.816e7b21.js.map","sourceRoot":"/__parcel_source_root/"}